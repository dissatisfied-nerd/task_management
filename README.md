# Task Managment System

---

### Техническое задание: Проектирование базы данных для системы управления задачами (Task Management System)

**Цель:** Спроектировать схему реляционной базы данных PostgreSQL для веб-приложения управления проектами и задачами (аналог Trello, Linear).

#### Основные бизнес-требования:

1.  **Пользователи:** Система должна поддерживать регистрацию и аутентификацию пользователей.
2.  **Рабочие пространства (Workspaces):** Пользователь может создавать несколько изолированных рабочих пространств (например, для разных компаний или проектов).
3.  **Доски (Boards):** Внутри рабочего пространства пользователи могут создавать несколько досок (например, "Разработка продукта", "Маркетинговая кампания").
4.  **Колонки (Columns/Lists):** Каждая доска содержит упорядоченный список колонок для организации workflow (например, "Бэклог", "В работе", "На ревью", "Готово").
5.  **Задачи (Tasks/Issues):** Задачи создаются внутри колонок. Задача должна содержать основную информацию и может быть назначена на одного из участников рабочего пространства.
6.  **Комментарии (Comments):** Участники могут оставлять комментарии к задачам.
7.  **Теги (Tags/Labels):** Задачи можно помечать тегами для категоризации (например, "баг", "улучшение", "срочно").
8.  **Управление доступом:** Пользователь, создавший рабочее пространство, является его администратором. Он может приглашать других пользователей в пространство и назначать им роли (например, "Участник", "Наблюдатель").

---

#### Перечень сущностей и их ключевых атрибутов (требуется дополнить и связать):

**1. Пользователь (User)**
*   Уникальный идентификатор
*   Электронная почта
*   Хэшированный пароль
*   Имя (или имя пользователя)
*   Дата и время регистрации

**2. Рабочее пространство (Workspace)**
*   Уникальный идентификатор
*   Название
*   Описание (опционально)
*   Владелец (связь с пользователем)
*   Дата создания

**3. Участник рабочего пространства (WorkspaceMember)**
*   *Задача: продумать, как связать пользователя и рабочее пространство, учитывая, что один пользователь может быть в нескольких пространствах, и в каждом иметь свою роль.*
*   Атрибуты: пользователь, рабочее пространство, роль (например, `admin`, `member`, `viewer`).

**4. Доска (Board)**
*   Уникальный идентификатор
*   Название
*   Принадлежность к рабочему пространству
*   Владелец (связь с пользователем)
*   Порядок отображения досок внутри workspace (опционально)

**5. Колонка (Column)**
*   Уникальный идентификатор
*   Название (например, "To Do")
*   Принадлежность к доске
*   **Порядок колонки внутри доски (важный атрибут для организации Kanban-доски)**

**6. Задача (Task)**
*   Уникальный идентификатор
*   Заголовок
*   Описание (опционально, может быть большим текстом)
*   Статус (связь с колонкой)
*   Автор (связь с пользователем)
*   Исполнитель (assignee, связь с пользователем, опционально)
*   Срок выполнения (due date, опционально)
*   **Порядок задачи внутри колонки (важный атрибут)**
*   Дата создания

**7. Тег (Tag)**
*   Уникальный идентификатор
*   Название
*   Цвет (опционально)
*   Принадлежность к рабочему пространству (теги уникальны в рамках workspace)

**8. Связь задач и тегов (TaskTag)**
*   *Задача: продумать структуру связи "многие-ко-многим", так как одна задача может иметь несколько тегов, а один тег может быть присвоен многим задачам.*

**9. Комментарий (Comment)**
*   Уникальный идентификатор
*   Текст комментария
*   Автор (связь с пользователем)
*   Задача, к которой оставлен комментарий
*   Дата и время создания
*   *Опционально: возможность редактирования, родительский комментарий для создания веток обсуждений.*

---

#### Задачи для разработчика:

1.  **Спроектировать полную схему БД (ERD):**
    *   Определить все необходимые таблицы, основываясь на сущностях выше.
    *   Определить типы данных для каждого атрибута (например, `UUID`, `VARCHAR`, `TEXT`, `TIMESTAMP WITH TIME ZONE`).
    *   Продумать и добавить все первичные ключи (PK) и внешние ключи (FK).
    *   Определить, какие поля должны иметь ограничения `NOT NULL`, `UNIQUE`.

2.  **Реализовать связи:**
    *   Какие связи между сущностями являются "один-ко-многим" (например, одна доска -> много колонок)?
    *   Какие связи являются "многие-ко-многим" (например, задачи и теги)? Для этих связей необходимо создать отдельные таблицы-связки.

3.  **Учесть ключевые бизнес-ограничения:**
    *   Пользователь может быть назначен исполнителем задачи только если он является участником того же рабочего пространства, к которому относится задача.
    *   Задача не может находиться в колонке, которая принадлежит другой доске.
    *   Удаление рабочего пространства должно каскадно удалять все связанные данные (доски, колонки, задачи) или быть запрещено, если данные существуют (в зависимости от логики).

4.  **Продумать индексы:**
    *   На какие поля (помимо первичных ключей) стоит добавить индексы для ускорения частых запросов? (Например, `(column_id, task_order)` для быстрой сортировки задач в колонке).

**Результатом выполнения задания должны быть:**
*   **SQL-скрипты** с командами `CREATE TABLE` для всех сущностей, один `.sql` файл на одну таблицу, название файла совпадает с названием создаваемой таблицей.
*   **Диаграмма**, отображающая схему базы данных.
